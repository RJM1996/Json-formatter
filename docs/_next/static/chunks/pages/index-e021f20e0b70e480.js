(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9684)}])},9684:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Home}});var r=t(5893),i=t(5152),a=t.n(i),l=t(6373),s=t(5400),o=t.n(s),c=t(1187),d=t(4048),u=t(987),h=t(7294);function formatJson(e){let processJsSpecialSyntax=e=>e=(e=(e=(e=e.replace(/,(\s*[}\]])/g,"$1")).replace(/:\s*undefined\b/g,": null")).replace(/([{,]\s*)([a-zA-Z_$][a-zA-Z0-9_$]*)\s*:/g,'$1"$2":')).replace(/'([^'\\]*(\\.[^'\\]*)*)'/g,'"$1"');try{if(!e.trim())return null;let n=(e=>{let n=!1,t=!1,r=!1,i="",a="",l="";for(let s=0;s<e.length;s++){let o=e[s],c=e[s+1]||"";if(t||r||'"'!==o&&"'"!==o||"\\"===a||(n?o===l&&(n=!1):(n=!0,l=o)),!n){if(t||r){if(t){if("*"===o&&"/"===c){t=!1,s++,i+="\n";continue}}else if(r&&("\n"===o||"\r"===o)){r=!1,i+=o;continue}}else{if("/"===o&&"*"===c){t=!0,s++;continue}if("/"===o&&"/"===c){r=!0,s++;continue}}}t||r||(i+=o,/\s/.test(o)||(l=o)),a=o}return i.trim()})(e);return(e=>{e=e.replace(/^\uFEFF/,"");try{return JSON.parse(e)}catch(n){try{let n=processJsSpecialSyntax(e);return JSON.parse(n)}catch(n){try{return Function("return ".concat(e))()}catch(e){throw Error("无法解析输入内容")}}}})(n)}catch(e){if(e instanceof Error)throw Error("解析错误: ".concat(e.message));throw Error("无法解析输入内容")}}let f=a()(()=>t.e(69).then(t.bind(t,8069)),{loadableGenerated:{webpack:()=>[8069]},ssr:!1}),{Content:g}=l.default;function Home(){let[e,n]=(0,h.useState)(""),[t,i]=(0,h.useState)(""),[a,s]=(0,h.useState)(null),[m,p]=(0,h.useState)(null),[x,S]=(0,h.useState)([]),[j,N]=(0,h.useState)(!0),[k,v]=(0,h.useState)(!1),C=(0,h.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t=JSON.stringify(e,null,2);return(e=>{let t=e.split("\n"),r=0,i=t.map(e=>{let t=e.match(/^[\s]*/);t&&(r=t[0].length/2);let i=n[r];return i?"".concat(e," // ").concat(i):e});return i.join("\n")})(t)}catch(e){return console.error("Formatting error:",e),""}},[]);return(0,h.useEffect)(()=>{if(!e){i(""),S([]);return}try{let n=formatJson(e),t=C(n);if(i(t),m){let e=m.getModel();if(e){let n=e.getLinesContent().reduce((n,t,r)=>{if(t.includes("{")){let t=r+1,i=1,a=t;for(let l=r+1;l<e.getLineCount();l++){let r=e.getLineContent(l+1);if(r.includes("{")&&i++,r.includes("}")&&i--,0===i){a=l+1,n.push({start:t,end:a,expanded:!0});break}}}return n},[]);S(n)}}}catch(e){console.error("Parsing error:",e),i("")}},[e,m,C]),(0,h.useEffect)(()=>{let e=localStorage.getItem("theme");N(!e||"dark"===e)},[]),(0,r.jsx)(l.default,{className:"layout ".concat(j?"dark":"light"," ").concat(k?"theme-transitioning":""),children:(0,r.jsx)(g,{className:"content",children:(0,r.jsxs)("div",{className:"editors-wrapper",children:[(0,r.jsxs)("div",{className:"editor-panel input-panel",children:[(0,r.jsx)("div",{className:"panel-header",children:(0,r.jsxs)("div",{className:"panel-header-left",children:[(0,r.jsx)("h3",{children:"输入（支持 JSON、JSONC 和 JS 对象）"}),(0,r.jsxs)(d.ZP,{children:[(0,r.jsx)(o(),{onClick:()=>{n("{\n    // 这是一个注释\n    name: 'test',\n    value: undefined,\n    /* 这是多行注释\n       第二行 */\n    data: {\n      test: \"value\"\n    }\n  }")},children:"JS对象示例"}),(0,r.jsx)(o(),{onClick:()=>{n('{\n    // 这是一个 JSONC 示例\n    "name": "example",\n    "description": "这是一个带注释的 JSON", // 行尾注释\n    /* 多行注释\n       支持嵌套对象 */\n    "config": {\n      "enabled": true,\n      "items": [\n        "item1",\n        "item2"  // 数组元素注释\n      ],\n      "options": {\n        "debug": false,  // 调试模式\n        "timeout": 1000  // 超时时间\n      }\n    }  // 支持尾随逗号\n  }')},children:"JSONC示例"})]})]})}),(0,r.jsx)(f,{height:"calc(100vh - 64px)",defaultLanguage:"json",value:e,onChange:e=>n(e||""),theme:j?"vs-dark":"light",onMount:e=>{s(e),e.focus()},options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",wordWrap:"on",automaticLayout:!0,folding:!0,smoothScrolling:!0,renderWhitespace:"none",contextmenu:!1,theme:j?"vs-dark":"vs-light",renderValidationDecorations:"off",renderLineHighlight:"none"},loading:(0,r.jsx)("div",{className:"editor-loading",children:"Loading..."})})]}),(0,r.jsxs)("div",{className:"editor-panel output-panel",children:[(0,r.jsxs)("div",{className:"panel-header",children:[(0,r.jsx)("h3",{children:"格式化结果"}),(0,r.jsxs)(d.ZP,{children:[(0,r.jsx)(o(),{onClick:()=>{m&&m.getAction("editor.unfoldAll").run()},children:"展开全部"}),(0,r.jsx)(o(),{onClick:()=>{m&&m.getAction("editor.foldAll").run()},children:"折叠全部"}),(0,r.jsx)(o(),{onClick:()=>{t&&navigator.clipboard.writeText(t).then(()=>{c.ZP.success("已复制到剪贴板！")})},disabled:!t,children:"复制"}),(0,r.jsx)("div",{className:"theme-switch",children:(0,r.jsx)(u.Z,{checked:j,onChange:e=>{v(!0),N(e),localStorage.setItem("theme",e?"dark":"light"),setTimeout(()=>{v(!1)},300)},checkedChildren:"\uD83C\uDF19",unCheckedChildren:"☀️"})})]})]}),(0,r.jsx)(f,{height:"calc(100vh - 64px)",defaultLanguage:"json",value:t,theme:j?"vs-dark":"light",onMount:e=>{p(e)},options:{readOnly:!0,minimap:{enabled:!1},fontSize:14,lineNumbers:"on",wordWrap:"on",automaticLayout:!0,folding:!0,foldingStrategy:"indentation"}})]})]})})})}}},function(e){e.O(0,[612,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);